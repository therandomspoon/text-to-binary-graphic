<!DOCTYPE html>
<html>
  <head>
    <title>Text to Binary Converter</title>
    <style>
      #canvas {
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <form onsubmit="convertTextToBinary(event)">
      <label for="text-input">Enter text to convert:</label>
      <input type="text" id="text-input" />
      <button type="submit">Convert</button>
    </form>
    <canvas id="canvas"></canvas>
    <form onsubmit="convertBinaryToText(event)">
      <button type="submit">Convert Image to Text</button>
      <textarea id="text-output"></textarea>
    </form>
    <script>
      function convertTextToBinary(event) {
        event.preventDefault();
        const textInput = document.getElementById('text-input');
        const text = textInput.value;
        const binary = text
          .split('')
          .map((char) => char.charCodeAt(0).toString(2))
          .join('');
        drawBinaryImage(binary);
      }

      function drawBinaryImage(binary) {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const width = Math.ceil(Math.sqrt(binary.length));
        const size = 20; // size of each pixel in pixels
        canvas.width = width * size;
        canvas.height = width * size;
        let x = 0;
        let y = 0;
        for (let i = 0; i < binary.length; i++) {
          const color = binary[i] === '1' ? 'black' : 'white';
          ctx.fillStyle = color;
          ctx.fillRect(x * size, y * size, size, size);
          x++;
          if (x >= width) {
            x = 0;
            y++;
          }
        }
      }

      function convertBinaryToText(event) {
        event.preventDefault();
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        let binary = '';
        for (let i = 0; i < imageData.data.length; i += 4) {
          const r = imageData.data[i];
          const g = imageData.data[i + 1];
          const b = imageData.data[i + 2];
          const color = r === 0 && g === 0 && b === 0 ? '1' : '0';
          binary += color;
        }
        const text = binary
          .match(/.{1,8}/g)
          .map((byte) => String.fromCharCode(parseInt(byte, 2)))
          .join('');
        const textOutput = document.getElementById('text-output');
        textOutput.value = text;
      }
    </script>
  </body>
</html>
